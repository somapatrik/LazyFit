<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:Convertes="clr-namespace:LazyFit.Converters"
             xmlns:viewModels="clr-namespace:LazyFit.ViewModels"
             x:Class="LazyFit.Views.LatestActionsView">

    <VerticalStackLayout>

        <CollectionView ItemsSource="{Binding LatestActions}">
            <CollectionView.ItemsLayout>

                <LinearItemsLayout Orientation="Vertical" ItemSpacing="0"/>

            </CollectionView.ItemsLayout>

            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <SwipeView>
                        <SwipeView.LeftItems>
                            <SwipeItems>
                                <SwipeItem 
                                   Text="Delete"
                                   IconImageSource="icons/bin.png"
                                   BackgroundColor="IndianRed"
                                   Command="{Binding DeleteAction, Source={RelativeSource AncestorType={x:Type viewModels:LatestActionsViewModel}}}"
                                   CommandParameter="{Binding .}"/>
                            </SwipeItems>
                        </SwipeView.LeftItems>
                        
                        <Border StrokeThickness=".7" Padding="0,10">
                            
                            <Border.StrokeShape>
                                <RoundRectangle CornerRadius="7"/>
                            </Border.StrokeShape>
                            
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="2*"/>
                                    <ColumnDefinition Width="auto"/>
                                </Grid.ColumnDefinitions>

                                <Grid.RowDefinitions>
                                    <RowDefinition/>
                                    <RowDefinition/>
                                </Grid.RowDefinitions>

                                <BoxView Grid.Column="0" 
                                     Grid.Row="0" 
                                     Grid.RowSpan="1" 
                                     WidthRequest="20" 
                                     HeightRequest="20" 
                                     CornerRadius="20" 
                                     VerticalOptions="End"
                                     HorizontalOptions="Center">

                                    <BoxView.Triggers>
                                        <DataTrigger TargetType="BoxView" Binding="{Binding Type}" Value="Food">
                                            <Setter Property="Color" Value="{StaticResource NexenColor}"/>
                                        </DataTrigger>
                                        <DataTrigger TargetType="BoxView" Binding="{Binding Type}" Value="Drink">
                                            <Setter Property="Color" Value="{StaticResource BootstrapWarningBg}"/>
                                        </DataTrigger>
                                        <DataTrigger TargetType="BoxView" Binding="{Binding Type}" Value="Mood">
                                            <Setter Property="Color" Value="darkblue"/>
                                        </DataTrigger>
                                        <DataTrigger TargetType="BoxView" Binding="{Binding Type}" Value="Weight">
                                            <Setter Property="Color" Value="DarkOrange"/>
                                        </DataTrigger>
                                        <DataTrigger TargetType="BoxView" Binding="{Binding Type}" Value="Fast">
                                            <Setter Property="Color" Value="{StaticResource Primary}"/>
                                        </DataTrigger>

                                    </BoxView.Triggers>

                                </BoxView>

                                <Label Grid.Row="1" 
                                   Grid.Column="0" 
                                   Text="{Binding Type}" 
                                   HorizontalTextAlignment="Center" 
                                   VerticalTextAlignment="End" 
                                   TextColor="Gray" 
                                   FontSize="Small"/>

                                <Label Grid.Row="0" Grid.Column="1" Text="{Binding Date, Converter={Convertes:DateTimeToShortConverter}}" TextColor="Gray"/>
                                <Label Grid.Row="1" Grid.Column="1" Text="{Binding SubjectText}" FontSize="Medium"/>
                                <!--<Button  Grid.Column="2" 
                                     Grid.RowSpan="2"  
                                     Text="â‹®" 
                                     FontSize="Large"
                                     TextColor="Gray"
                                     BackgroundColor="Transparent"
                                     BorderWidth="0"
                                     VerticalOptions="Center"
                                     HorizontalOptions="Center"
                                     Command="{Binding DeleteAction, Source={RelativeSource AncestorType={x:Type viewModels:LatestActionsViewModel}}}"
                                     CommandParameter="{Binding .}"/>-->
                            </Grid>
                        </Border>
                    </SwipeView>
                </DataTemplate>
            </CollectionView.ItemTemplate>

        </CollectionView>

    </VerticalStackLayout>

</ContentView>
